RV-Android CLI Beta
-------------------

The RV-Android CLI beta is intended to allow developers to instrument
compiled Android applications (APK's) with libraries generated by
RV-Monitor.  

RV-Android allows for two things:
- Aspect oriented programming on Android - simply do not provide any 
  monitors and RV-Android provides an aspect-oriented compiler for
  binary Android applications.

- Full Runtime Verification - Add RV-Monitor library files to the 
  monitors directory to automatically generate, compile, and weave 
  (through aspects) monitoring libraries providing runtime
  monitoring of formal properties.


Preparation
------------

RV-Android requires a shell script interpreter (/bin/sh) and will thus
run only on Linux and other POSIX-compliant systems (eg - OS X).  It is
likely that RV-Android will work with Cygwin, though we do not support
or test on Windows at this time.

Before using RV-Android, it is necessary to install **both** RV-Monitor
and JavaMOP from runtimeverification.com/monitor, adding both bin
directories to your PATH as specified in the installers and README files.

Make sure the following commands work in your environment
(and do not return not found):
- rv-monitor -help
- ajc -help
- javamop -help


Also, you must install both the JDK and Android SDK, providing the
jarsigner command.  See the basic setup page of the Android SDK for
more information.


Usage
-----

chmod +x instrument_apk.sh
./instrument_apk.sh [apk] [keystore] [keystore password] [signing key alias] [monitors_directory] [aspects_directory]

- [apk] is the relative path to the Android APK you want to instrument
- [keystore] is the relative path to an Android [keystore](https://developer.android.com/tools/publishing/app-signing.html#cert)
- [keystore password] is the keystore's password (sent to standard input of the signing process)
- [signing_key_alias] is the alias of the key in the keystore to sign the final application with
- [monitors_directory] is the relative path to a directory containing .rvm files describing the monitors (use monitors/ if unsure)
- [aspects_directory] is the same as above, but for aspects (.aj AspectJ files)

Example usage:
./instrument_apk.sh app.apk ~/example.keystore examples_password rv_cloud monitors/ aspects/
